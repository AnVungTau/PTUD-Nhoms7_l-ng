package gui;

import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFPage;
import com.sun.pdfview.PDFRenderer;

import javax.swing.*;
import java.awt.*;
import java.io.File;
import java.io.RandomAccessFile;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;

public class PDFViewer extends JFrame {

    public PDFViewer(String filePath) {
        super("PDF Viewer");

        try {
            // Load PDF file
            File file = new File(filePath);
            RandomAccessFile raf = new RandomAccessFile(file, "r");
            FileChannel channel = raf.getChannel();
            ByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
            PDFFile pdfFile = new PDFFile(buf);

            // Get the first page
            PDFPage page = pdfFile.getPage(0);

            // Create PDF renderer
            PDFRenderer renderer = new PDFRenderer(page);

            // Set up the Swing component to display the PDF page
            JPanel panel = new JPanel() {
                @Override
                protected void paintComponent(Graphics g) {
                    super.paintComponent(g);
                    renderer.render((Graphics2D) g, null, null, true);
                }
            };

            // Add the panel to the frame
            add(panel);

        } catch (Exception e) {
            e.printStackTrace();
        }

        // Set frame properties
        setSize(600, 800);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new PDFViewer("path/to/your/file.pdf"));
    }
}